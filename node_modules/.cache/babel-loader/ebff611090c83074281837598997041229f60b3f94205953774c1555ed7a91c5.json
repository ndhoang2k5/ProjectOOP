{"ast":null,"code":"var _jsxFileName = \"D:\\\\ProjectOOP-nam\\\\src\\\\features\\\\students\\\\StudentsPage.js\",\n  _s = $RefreshSig$();\n// src/features/students/StudentsPage.js\n\nimport React, { useState } from 'react';\nimport StudentStatusCard from './components/StudentStatusCard';\nimport StudentForm from './components/StudentForm';\nimport StudentSearch from './components/StudentSearch';\nimport StudentEditForm from './components/StudentEditForm';\nimport * as api from '../../service/mockApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StudentsPage() {\n  _s();\n  const [status, setStatus] = useState(null);\n  const [error, setError] = useState('');\n  const [addMessage, setAddMessage] = useState(''); // Thêm state cho thông báo\n\n  const handleSearch = async studentId => {\n    if (!studentId) return;\n    setError('');\n    setStatus(null);\n    try {\n      setStatus(await api.getStudentById(studentId));\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  const handleAddStudent = async studentData => {\n    setAddMessage(''); // Reset thông báo\n    try {\n      if (!studentData.studentId || !studentData.name || !studentData.age || !studentData.email) {\n        alert('Vui lòng nhập đầy đủ thông tin: Mã SV, Tên, Tuổi và Email.');\n        return;\n      }\n      const newStudent = await api.addStudent(studentData);\n      setAddMessage(`Thêm sinh viên ${newStudent.studentName} thành công!`); // Hiển thị thông báo thành công\n      setTimeout(() => setAddMessage(''), 3000); // Ẩn thông báo sau 3s\n    } catch (err) {\n      var _err$response, _err$response$data;\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message;\n      setAddMessage(`Lỗi: ${errorMessage}`); // Hiển thị thông báo lỗi\n    }\n  };\n\n  // THÊM HÀM MỚI: Hàm này sẽ được gọi bởi StudentEditForm sau khi cập nhật thành công.\n  // Nhiệm vụ của nó là gọi lại handleSearch để tải lại dữ liệu mới nhất.\n  const handleEditSuccess = updatedStudentId => {\n    // Kiểm tra xem sinh viên đang được hiển thị có phải là sinh viên vừa được sửa không\n    if (status && status.student && status.student.studentId === updatedStudentId) {\n      handleSearch(updatedStudentId);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-header\",\n      children: \"Qu\\u1EA3n l\\xFD Sinh vi\\xEAn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"T\\xECm ki\\u1EBFm th\\xF4ng tin sinh vi\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudentSearch, {\n        onSearch: handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          border: 'none',\n          borderTop: '1px solid #eee',\n          margin: '20px 0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudentStatusCard, {\n        status: status,\n        error: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Th\\xEAm sinh vi\\xEAn m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudentForm, {\n        onSubmit: handleAddStudent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), addMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: addMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin sinh vi\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StudentEditForm, {\n        onUpdateSuccess: handleEditSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentsPage, \"DylLRkSUTQY/geYbkimcWciSOqY=\");\n_c = StudentsPage;\nexport default StudentsPage;\nvar _c;\n$RefreshReg$(_c, \"StudentsPage\");","map":{"version":3,"names":["React","useState","StudentStatusCard","StudentForm","StudentSearch","StudentEditForm","api","jsxDEV","_jsxDEV","StudentsPage","_s","status","setStatus","error","setError","addMessage","setAddMessage","handleSearch","studentId","getStudentById","err","message","handleAddStudent","studentData","name","age","email","alert","newStudent","addStudent","studentName","setTimeout","_err$response","_err$response$data","errorMessage","response","data","handleEditSuccess","updatedStudentId","student","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSearch","style","border","borderTop","margin","onSubmit","marginTop","onUpdateSuccess","_c","$RefreshReg$"],"sources":["D:/ProjectOOP-nam/src/features/students/StudentsPage.js"],"sourcesContent":["// src/features/students/StudentsPage.js\r\n\r\nimport React, { useState } from 'react';\r\nimport StudentStatusCard from './components/StudentStatusCard';\r\nimport StudentForm from './components/StudentForm';\r\nimport StudentSearch from './components/StudentSearch';\r\nimport StudentEditForm from './components/StudentEditForm';\r\nimport * as api from '../../service/mockApi';\r\n\r\nfunction StudentsPage() {\r\n  const [status, setStatus] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [addMessage, setAddMessage] = useState(''); // Thêm state cho thông báo\r\n\r\n  const handleSearch = async (studentId) => {\r\n    if (!studentId) return;\r\n    setError(''); setStatus(null);\r\n    try { \r\n      setStatus(await api.getStudentById(studentId)); \r\n    } catch (err) { \r\n      setError(err.message); \r\n    }\r\n  };\r\n\r\n  const handleAddStudent = async (studentData) => {\r\n    setAddMessage(''); // Reset thông báo\r\n    try {\r\n      if (!studentData.studentId || !studentData.name || !studentData.age || !studentData.email) {\r\n          alert('Vui lòng nhập đầy đủ thông tin: Mã SV, Tên, Tuổi và Email.');\r\n          return;\r\n      }\r\n      const newStudent = await api.addStudent(studentData);\r\n      setAddMessage(`Thêm sinh viên ${newStudent.studentName} thành công!`); // Hiển thị thông báo thành công\r\n      setTimeout(() => setAddMessage(''), 3000); // Ẩn thông báo sau 3s\r\n    } catch(err) { \r\n      const errorMessage = err.response?.data?.error || err.message;\r\n      setAddMessage(`Lỗi: ${errorMessage}`); // Hiển thị thông báo lỗi\r\n    }\r\n  };\r\n\r\n  // THÊM HÀM MỚI: Hàm này sẽ được gọi bởi StudentEditForm sau khi cập nhật thành công.\r\n  // Nhiệm vụ của nó là gọi lại handleSearch để tải lại dữ liệu mới nhất.\r\n  const handleEditSuccess = (updatedStudentId) => {\r\n    // Kiểm tra xem sinh viên đang được hiển thị có phải là sinh viên vừa được sửa không\r\n    if (status && status.student && status.student.studentId === updatedStudentId) {\r\n      handleSearch(updatedStudentId);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"page-header\">Quản lý Sinh viên</h2>\r\n      \r\n      <div className=\"card\">\r\n        <h3>Tìm kiếm thông tin sinh viên</h3>\r\n        <StudentSearch onSearch={handleSearch} />\r\n        <hr style={{border: 'none', borderTop: '1px solid #eee', margin: '20px 0'}} />\r\n        <StudentStatusCard status={status} error={error} />\r\n      </div>\r\n      \r\n      <div className=\"card\">\r\n        <h3>Thêm sinh viên mới</h3>\r\n        <StudentForm onSubmit={handleAddStudent} />\r\n        {/* Hiển thị thông báo thêm sinh viên */}\r\n        {addMessage && <p style={{marginTop: '10px'}}>{addMessage}</p>}\r\n      </div>\r\n      \r\n      <div className=\"card\">\r\n        <h3>Chỉnh sửa thông tin sinh viên</h3>\r\n        {/* SỬA LẠI: Truyền prop onUpdateSuccess vào component con */}\r\n        <StudentEditForm onUpdateSuccess={handleEditSuccess} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default StudentsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}